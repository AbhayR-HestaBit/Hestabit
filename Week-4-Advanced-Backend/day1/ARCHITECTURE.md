# Architecture

## Flow

The application starts in the following order:

server.js 
- config (for env variables) 
- app loader
- database loader

Where first V8 engine is invoked -> then sync code -> then async code -> Libuv

## Folder Structure & Responsibilities

### src/config
Handles environment configuration.

- Loads environment variables based on NODE_ENV
- Prevents direct usage of process.env throughout the codebase
- Ensures environment isolation (local, dev, prod)

### src/loaders
Responsible for initializing application components.

- app.js: controls application startup.
- db.js: establishes database connection.

### src/utils
Contains reusable utilities used across the application.

- logger.js: centralized Winston logger for structured logging

Utilities do not contain business logic.

### src/models
Contains database schemas and models.
(Implemented in later days.)

### src/repositories
Handles direct database access.
Keeps database queries separate from business logic.

### src/services
Contains business logic and application rules.
Does not handle HTTP-specific logic.

### src/controllers
Handles HTTP request and response flow.
Calls services and returns formatted responses.

### src/middlewares
Contains reusable Express middlewares such as:
- validation
- security
- error handling

### src/jobs
Handles background and asynchronous tasks
such as email processing or report generation.

### src/logs
Stores application logs generated by Winston.

- app.log: general application logs
- error.log: error-level logs

## Logging Strategy

The application uses a centralized logging system.
Logs are written to files for production debugging and to console during development.

Startup events, database connection status, and errors are logged consistently.

## Design Principles

- Separation of concerns
- Predictable startup sequence
- Centralized configuration and logging
- Scalable folder structure


